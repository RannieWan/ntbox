<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>`ntbox`: Reference guide, package version `r packageVersion('ntbox')` • ntbox</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="`ntbox`: Reference guide, package version `r packageVersion('ntbox')`">
<meta property="og:description" content="ntbox">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ntbox</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.5.1.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/GBIF_data_curation.html">Obtaining and cleaning geographic data</a>
    </li>
    <li>
      <a href="../articles/ellipsoid_selection.html">An introduction to ellipsoid model selection</a>
    </li>
    <li>
      <a href="../articles/gui_reference.html">`ntbox`: Reference guide, package version `r packageVersion('ntbox')`</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/luismurao/ntbox/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>
<code>ntbox</code>: Reference guide, package version 0.5.1.4</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/luismurao/ntbox/blob/master/vignettes/gui_reference.Rmd"><code>vignettes/gui_reference.Rmd</code></a></small>
      <div class="hidden name"><code>gui_reference.Rmd</code></div>

    </div>

    
    
<script type="text/javascript">
  // When the document is fully rendered...
  $(document).ready(function() {
    // ...select all header elements...
    $('h1, h2, h3, h4, h5').each(function() {
      // ...and add an id to them corresponding to their 'titles'
      $(this).attr('id', $(this).html());
    });
  });
</script><div id="presentation" class="section level1">
<h1 class="hasAnchor">
<a href="#presentation" class="anchor"></a>Presentation</h1>
<p>Here, we present a quick guide that will show the basics of the Graphical User Interface (GUI) of <code>ntbox</code> with the instructions of how to save the analysis in a workflow directory (at the end of this document); Note that the software is open-source, so you could see the code that it’s running behind the GUI by visiting the author’s <a href="https://github.com/luismurao/ntbox"><code>github</code></a> repository. You can find an improved version of this vignette in this web site <a href="https://luismurao.github.io/ntbox_user_guide.html" class="uri">https://luismurao.github.io/ntbox_user_guide.html</a></p>
<div id="launching-the-app" class="section level2">
<h2 class="hasAnchor">
<a href="#launching-the-app" class="anchor"></a>Launching the app</h2>
<p>Load <code>ntbox</code> in your R session and type</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">ntbox</span>)
<span class="fu"><a href="../reference/run_ntbox.html">run_ntbox</a></span>()</pre></body></html></div>
</div>
<div id="first-look" class="section level2">
<h2 class="hasAnchor">
<a href="#first-look" class="anchor"></a>First look</h2>
<p>The above launches the Graphical User Interface (GUI) of <code>ntbox</code></p>
<div class="figure">
<img src="figures/ntbox.png" alt="NicheToolBox GUI" width="60%"><p class="caption">
NicheToolBox GUI
</p>
</div>
</div>
<div id="ntbox-sections" class="section level2">
<h2 class="hasAnchor">
<a href="#ntbox-sections" class="anchor"></a><code>ntbox</code> sections</h2>
<p>On navigation bar menu of the GUI, you will see 10 sections:</p>
<ol style="list-style-type: decimal">
<li>
<strong><code>AppSettings</code>:</strong> On this section you will specify three main inputs for your niche analysis:
<ul>
<li>Raster layers directory: this is the path to the directory where your niche layers are.</li>
<li>Projection layers directory: this is the path to the directory where your projection layers are.</li>
<li>Workflow directory: Path to the directory where <code>ntbox</code> results will be saved.</li>
</ul>
</li>
<li>
<strong><code>Data</code>:</strong> The data section has methods to search and curate occurrence data. If the user does not have occurrence data, <code>ntbox</code> can download GBIF data via the <code>spocc</code> package; Data curation can be done via <code>leaflet</code> maps.</li>
<li>
<strong><code>Niche Space</code>:</strong> This provides methods extract and visualize information from the niche space (also called environmental space <span class="math inline">\(E\)</span>).</li>
<li>
<strong><code>Niche correlations</code>:</strong> This section provides methods to visualize correlations and filter the environmental variables that are not correlated.<br>
</li>
<li>
<strong><code>Niche clustering</code>:</strong> Provides methods to perform <a href="https://en.wikipedia.org/wiki/K-means_clustering"><em>k</em>-means</a> clustering and project the results in the geographic and environmental spaces (known as Hutchison’s duality <span class="citation">(Colwell and Rangel 2009)</span>)</li>
<li>
<strong><code>ENM</code>:</strong> Methods to model the ecological niche; <code>ntbox</code> has functions to do bioclim <span class="citation">(Busby, Margules, and Austin 1991; Booth et al. 2014)</span> and ellipsoid models <span class="citation">(Van Aelst and Rousseeuw 2009)</span>. Although the maxent <span class="citation">(Phillips, Dudik, and Schapire 2004; Phillips and Dudík 2008)</span> is not yet in the GUI interface, <code>ntbox</code> it could be run by using <code><a href="../reference/maxent_call.html">ntbox::maxent_call</a></code>function on the command line.</li>
<li>
<strong><code>SDM performance</code>:</strong> Methods to measure the performance of the Species Distribution Models (SDM). These methods include Partial ROC <span class="citation">(Peterson, Papes, and Soberon 2008)</span>, binomial tests <span class="citation">(Anderson, Lew, and Peterson 2003)</span>, and the confusion matrix <span class="citation">(Fielding and Bell 1997)</span>; also have map thresholding via several methodologies <span class="citation">(Norris 2014; Jiménez-Valverde and Lobo 2007)</span>;</li>
<li>
<strong><code>Extrapolation Risk</code>:</strong> Methods to calculate environmental dissimilarity to evaluate extrapolation risk for model transfer exercises; it has Mobility-Oriented Parity (MOP) <span class="citation">(Owens et al. 2013)</span>; Multivariate Environmental Similarity Surface (an optimized version) <span class="citation">(Elith, Kearney, and Phillips 2010)</span> and Exdet <span class="citation">(Mesgaran, Cousens, and Webber 2014)</span>.</li>
<li>
<strong><code>GIS Tools</code>:</strong> Geographic Information System (GIS) tools to crop and mask raster layers and export them in other raster formats, make PCA transformation of the modeling layers.</li>
<li>
<strong><code>Save state</code>:</strong> By pressing the <code>Save state</code> button <span class="glyphicon glyphicon-hdd"></span> you can save the data and analysis that you have done inside the application.</li>
</ol>
</div>
</div>
<div id="appsettings-configuring-all-you-need" class="section level1">
<h1 class="hasAnchor">
<a href="#appsettings-configuring-all-you-need" class="anchor"></a>1. <code>AppSettings</code> configuring all you need</h1>
<p>This section is one of the most important steps in the modeling process because here you are going to specify your workflow directory and also load or obtain the modeling layers.</p>
<div id="workflow-directory" class="section level3">
<h3 class="hasAnchor">
<a href="#workflow-directory" class="anchor"></a>Workflow directory</h3>
<p>This is a method that lets the user save the workflow of the <code>ntbox</code> session. It can be used once the user has specified the path to the directory where the workflow will be saved (on <strong><code>AppSettings</code></strong> section); Depending on what you have done this will create some subdirectories inside the workflow directory with the results of your analysis (a data table of the curated occurrence records in <strong>csv</strong> format, a heat map of the correlations between you niche variables, a leaflet map of the occurrence data, rasters of the geographic projection of the niche models, model evaluation results, etc.) and also will create an <code>HTML</code> document with a summary showing the code that was run on the GUI.</p>
<p>Please select workflow directory by pressing the button <strong>Select workflow directoy</strong>.</p>
<div class="figure">
<img src="figures/ntbox_01_appsettings_01.png" alt="Workflow directory" width="60%"><p class="caption">
Workflow directory
</p>
</div>
<div class="figure">
<img src="figures/ntbox_01_appsettings_01b.png" alt="Select workflow directory" width="320"><p class="caption">
Select workflow directory
</p>
</div>
<p>Go to <code>Saving your analysis</code> section for an example on how to save the things that you have done in your <code>ntbox</code> session.</p>
</div>
<div id="uploading-your-niche-layers" class="section level2">
<h2 class="hasAnchor">
<a href="#uploading-your-niche-layers" class="anchor"></a>Uploading your niche layers</h2>
<p>Go to the <strong>Niche layers</strong> section and click on select raster layers directory</p>
<div class="figure">
<img src="figures/ntbox_01_appsettings.png" alt="Niche layers directory" width="220"><p class="caption">
Niche layers directory
</p>
</div>
<p>Once you have selected the directory click on <strong>Load niche layers</strong> button.</p>
<div class="figure">
<img src="figures/ntbox_01_appsettings_02.png" alt="Load niche layers" width="420"><p class="caption">
Load niche layers
</p>
</div>
</div>
<div id="projection-layers" class="section level2">
<h2 class="hasAnchor">
<a href="#projection-layers" class="anchor"></a>Projection layers</h2>
<p>These are the layers of environmental change (e.g. future or past) scenario(S). NicheToolBox uses them either to project the niche models or the PCAs computed for calibration layers; make sure that their names are the same as the niche layers.</p>
</div>
<div id="searching-environmental-data" class="section level2">
<h2 class="hasAnchor">
<a href="#searching-environmental-data" class="anchor"></a>Searching environmental data</h2>
<div id="calibration-layers" class="section level3">
<h3 class="hasAnchor">
<a href="#calibration-layers" class="anchor"></a>Calibration layers</h3>
<p>If you don’t have environmental layers, you can download them <a href="http://www.worldclim.org/">WorldClim data</a> directly from <code>ntbox</code> by selecting the option <em>Get envrionmental data</em>; the available layers are:</p>
<ul>
<li>Bioclim (10, 5, 2.5 minutes; 30 secs)</li>
<li>Min temperature (10, 5, 2.5 minutes; 30 secs)</li>
<li>Max temperature (10, 5, 2.5 minutes; 30 secs)</li>
<li>Precipitation (10, 5, 2.5 minutes; 30 secs)</li>
</ul>
<p><strong>Select the data you want to download and then press the <code>Get</code> button</strong></p>
</div>
<div id="projection-layers-1" class="section level3">
<h3 class="hasAnchor">
<a href="#projection-layers-1" class="anchor"></a>Projection layers</h3>
<p>Get IPPC5 climate projections from global climate models (GCMs) for four representative concentration pathways (RCPs) ( <a href="http://www.worldclim.org/cmip5_30s">click here</a>).</p>
<div class="figure">
<img src="figures/ntbox_01_appsettings_03.png" alt="Aviable Global Climate Models" width="220"><p class="caption">
Aviable Global Climate Models
</p>
</div>
<p><strong>Select the data you want to download and then press the <code>Get</code> button</strong></p>
</div>
</div>
</div>
<div id="the-data-section" class="section level1">
<h1 class="hasAnchor">
<a href="#the-data-section" class="anchor"></a>2. The <code>Data</code> section</h1>
<p><code>ntbox</code> can work with two sources of longitude/latitude data: a) GBIF records, which you can search, download and clean from GBIF, b) you can upload and clean your occurrence data from a local file.</p>
<div id="searching-gbif-records" class="section level2">
<h2 class="hasAnchor">
<a href="#searching-gbif-records" class="anchor"></a>Searching GBIF records</h2>
<p>Go to Data -&gt; GBIF data. Enter species <strong>genus</strong>, <strong>species name</strong> where corresponds, and optionally specify the number of records that you want to search (<strong>occ search limit</strong>). Press <strong>Search GBIF</strong> button and wait. If the species is in the GBIF portal a data table will be displayed, if the species is not in GBIF, it will display the following message: “No occurrences found”.</p>
<p>In the next example we will search occurrence data for the species <span class="math inline">\(Ambystoma\,\,tigrinum\)</span></p>
<div id="gbif-data-cleaning" class="section level3">
<h3 class="hasAnchor">
<a href="#gbif-data-cleaning" class="anchor"></a>GBIF data cleaning</h3>
<p>You can remove duplicate records using a separation (spatially filtering) distance in decimal degrees (default is 0). For <em>Ambystoma tigrinum</em> <strong>480 records</strong> were downloaded before cleaning, and after clicking <strong>Clean duplicates</strong> with a <span class="math inline">\(\delta=0\)</span> distance <strong>154</strong> remained, so there were <strong>326</strong> duplicate records.</p>
<div class="figure">
<img src="figures/ntbx_02_gbif.png" alt="GBIF search example" width="420"><p class="caption">
GBIF search example
</p>
</div>
</div>
<div id="clean-duplicates-by-group" class="section level3">
<h3 class="hasAnchor">
<a href="#clean-duplicates-by-group" class="anchor"></a>Clean duplicates by group</h3>
<p>Suppose that your species has a huge geographic range and you want to work only with the records that match certain criteria, for example, records that lie within Canada. You can curate duplicate records using a grouping variable; in this example, the grouping variable must be country. Go to <strong>Clean duplicates by group</strong> section and select the grouping variable in this case <strong>country</strong>, then select the country (Canada) and click <strong>Clean duplicates by group</strong>.</p>
<div class="figure">
<img src="figures/10_tutorial.png" alt="Duplicate records" width="220"><p class="caption">
Duplicate records
</p>
</div>
<p>From <strong>154</strong> records only <strong>2</strong> are in Canada.</p>
<div class="figure">
<img src="figures/12_tutorial.png" alt="Duplicate records" width="420"><p class="caption">
Duplicate records
</p>
</div>
</div>
<div id="gbif-visualizations" class="section level3">
<h3 class="hasAnchor">
<a href="#gbif-visualizations" class="anchor"></a>GBIF visualizations</h3>
<p>The GBIF dataset has some fields that can be used to get some exciting visualizations, particularly fields related to observation date (year, month, day) and country. In Data -&gt; GBIF data -&gt; GBIF visualizations tab you can play with interactive plots, create animated visualizations and display a calendar of the reported records by year.</p>
<div class="figure">
<img src="figures/ntbox_02_gbifvis.png" alt="GBIF visualizations" width="420"><p class="caption">
GBIF visualizations
</p>
</div>
<div class="figure">
<img src="figures/ambystoma_tigrinum_animatedMapNTB.gif" alt="GBIF visualizations" width="420"><p class="caption">
GBIF visualizations
</p>
</div>
</div>
</div>
<div id="user-data" class="section level2">
<h2 class="hasAnchor">
<a href="#user-data" class="anchor"></a>User data</h2>
<p>You can use and clean your latitude and longitude data for the modeling process. Go to Data -&gt; User data and upload your data. The data cleaning process is the same as the GBIF data.</p>
<div class="figure">
<img src="figures/ntbox_02_userdata.png" alt="User data" width="420"><p class="caption">
User data
</p>
</div>
</div>
<div id="geographic-explorations-using-dynamic-maps" class="section level2">
<h2 class="hasAnchor">
<a href="#geographic-explorations-using-dynamic-maps" class="anchor"></a>Geographic explorations using Dynamic Maps</h2>
<p>We have seen how to curate data using threshold distances and grouping variables in <code>ntbox</code>. Now let’s see how to use <code>leaflet</code> maps to 1) display longitude/latitude data, 2) clean data and, 3) define our accessibility (or study) area or polygon (<strong>M data</strong> refers to the <strong>M concept</strong> from the <strong>BAM diagram</strong> conceptual framework, which in the <strong>niche modeling world</strong> is the accessible area where the species has been able to reach even if has not established; see Barve et al. (2011)<span class="citation">(Barve et al. 2011)</span> . for a broader explanation on this concept, 4) clean data using the M polygon. The above can be done for either the GBIF dataset or the User dataset.</p>
<div id="display-longitude-and-latitude-data" class="section level3">
<h3 class="hasAnchor">
<a href="#display-longitude-and-latitude-data" class="anchor"></a>Display longitude and latitude data</h3>
<p>Go to Data -&gt; Dynamic Map and on the right panel <strong>Select a dataset</strong> that you want to work with; in this case GBIF data will be used.</p>
<div class="figure">
<img src="figures/ntbox_01_dynamic.png" alt="Dynamic map" width="420"><p class="caption">
Dynamic map
</p>
</div>
</div>
<div id="data-curation-using-the-dynamic-map" class="section level3">
<h3 class="hasAnchor">
<a href="#data-curation-using-the-dynamic-map" class="anchor"></a>Data curation using the Dynamic Map</h3>
<p>On the right-side panel, there is an option where you can specify the data point id to remove it from the dataset. Click on the pop-up to see the point id, select it in the select input form from the right panel and press <strong>Clean data points</strong> button to clean.</p>
<div class="figure">
<img src="figures/ntbox_02_dynamicpol_01.png" alt="Dynamic map" width="420"><p class="caption">
Dynamic map
</p>
</div>
</div>
<div id="define-an-m-accessibility-area-polygon" class="section level3">
<h3 class="hasAnchor">
<a href="#define-an-m-accessibility-area-polygon" class="anchor"></a>Define an M (accessibility area) polygon</h3>
<p>You can use <code>ntbox</code> to define your study area. Go to Data -&gt; Dynamic Map and in the right-side panel turn-on the button <strong>Define and work with M polygon</strong>, when activated you can either draw a polygon using the drawing tools (top-right corner) from <code>ntbox</code> or select your shapefile. If you prefer to define the M polygon using <code>ntbox</code> press the polygon tool and draw it:</p>
<div class="figure">
<img src="figures/ntbox_02_dynamicpol_01.png" alt="Dynamic map polygon" width="420"><p class="caption">
Dynamic map polygon
</p>
</div>
<p>Once defined, the polygon can be saved. In the right panel, there is a form where you can give a name for your polygon.</p>
<div class="figure">
<img src="figures/ntbox_02_dynamicpol_02.png" alt="Dynamic map polygon" width="420"><p class="caption">
Dynamic map polygon
</p>
</div>
</div>
<div id="data-curation-using-the-m-polygon" class="section level3">
<h3 class="hasAnchor">
<a href="#data-curation-using-the-m-polygon" class="anchor"></a>Data curation using the M polygon</h3>
<p>We can filter the data points that lie inside the polygon. In the right panel just press the button <strong>Points in polygon</strong></p>
<div class="figure">
<img src="figures/ntbox_02_dynamicpol_03.png" alt="Polygon clean" width="420"><p class="caption">
Polygon clean
</p>
</div>
</div>
</div>
</div>
<div id="niche-space" class="section level1">
<h1 class="hasAnchor">
<a href="#niche-space" class="anchor"></a>3. <code>Niche space</code>
</h1>
<p>To work in <strong>Niche space</strong> (i.e., “environmental space”) we need to have loaded our <strong>niche raster layers</strong> (<code>AppSettings</code> “go to the first section of the tutorial”) and also a <strong>longitude/latitude dataset</strong> (GBIF data or User data).</p>
<div id="extracting-niche-values-from-raster-layers" class="section level2">
<h2 class="hasAnchor">
<a href="#extracting-niche-values-from-raster-layers" class="anchor"></a>1. Extracting niche values from raster layers</h2>
<p>Go to Niche space -&gt; Niche data extraction and select a longitude and latitude dataset. In the example, I selected the <strong>GBIF dataset</strong>. If the dataset is not empty and we have loaded the <strong>raster layers</strong> the app will not show any message:</p>
<div class="figure">
<img src="figures/24_tutorial.png" alt="Extract environmental data" width="220"><p class="caption">
Extract environmental data
</p>
</div>
<p>On the contrary, if we have not loaded either the <strong>raster layers</strong> or the <strong>longitude/latitude data</strong> a message indicating what to do will be displayed.</p>
<div class="figure">
<img src="figures/25_tutorial.png" alt=" " width="420"><p class="caption">
</p>
</div>
<p>When the dataset and the layers are in the app memory we can proceed to the next step. Here you just need to press the <strong>Run</strong> button and then a data table with the niche values of the longitude and latitude data will be displayed.</p>
<div class="figure">
<img src="figures/ntbox_03_extract.png" alt="Extract environmental data" width="420"><p class="caption">
Extract environmental data
</p>
</div>
</div>
<div id="niche-explorations" class="section level2">
<h2 class="hasAnchor">
<a href="#niche-explorations" class="anchor"></a>Niche explorations</h2>
<p>We can explore our niche data using some exciting 3-Dimensional plots. Go to Niche space -&gt; Known niche and play with <strong><span class="math inline">\(x\)</span></strong>, <strong><span class="math inline">\(y\)</span></strong> and <strong><span class="math inline">\(z\)</span></strong> variables of the ellipsoid plot.</p>
<div class="figure">
<img src="figures/27_tutorial.png" alt="Niche space" width="420"><p class="caption">
Niche space
</p>
</div>
<div id="niche-trends" class="section level3">
<h3 class="hasAnchor">
<a href="#niche-trends" class="anchor"></a>Niche trends</h3>
<p>You can fit a (linear, quadratic, additive, smooth) model to see if your niche data have a trend.</p>
<div class="figure">
<img src="figures/ntbox_03_nvisual.png" alt="Niche trends" width="420"><p class="caption">
Niche trends
</p>
</div>
</div>
</div>
</div>
<div id="niche-correlations" class="section level1">
<h1 class="hasAnchor">
<a href="#niche-correlations" class="anchor"></a>4. <code>Niche correlations</code>
</h1>
<p>One popular method to select the niche variables for modeling species niches and distributions is to study correlations among niche variables and filter those variables that are highly correlated. In <code>Nichetoolbox</code> you can filter the variables that summarize the environmental information of your presences (occurrences) data according to a correlation threshold; this algorithm suggests which variables to use for the modeling part.</p>
<div class="figure">
<img src="figures/ntbox_04_ncors.png" alt="Niche correlations" width="420"><p class="caption">
Niche correlations
</p>
</div>
<div id="correlation-matrix" class="section level2">
<h2 class="hasAnchor">
<a href="#correlation-matrix" class="anchor"></a>Correlation matrix</h2>
<p>Also, you can explore the correlation matrix and download it in .csv format.</p>
<div class="figure">
<img src="figures/ntbox_04_corM.png" alt="Correlation matrix" width="420"><p class="caption">
Correlation matrix
</p>
</div>
</div>
<div id="correlogram" class="section level2">
<h2 class="hasAnchor">
<a href="#correlogram" class="anchor"></a>Correlogram</h2>
<p>Another thing that the user can do is to plot a correlogram.</p>
<div class="figure">
<img src="figures/ntbox_04_corgram.png" alt="Correlogram" width="420"><p class="caption">
Correlogram
</p>
</div>
</div>
</div>
<div id="niche-clustering" class="section level1">
<h1 class="hasAnchor">
<a href="#niche-clustering" class="anchor"></a>5. <code>Niche clustering</code>
</h1>
<p>When studying species niches and distributions, one of the biggest questions that come to my mind is whether or not the species are adapting to different niche conditions. One way to explore this question is using clustering algorithms (a statistical tool which aims to observe if a multivariate dataset has a cluster structure in such a way that the data belonging to the same cluster are highly similar among them but different respect to other groups). If clusters are different, we can think that populations of the same species are responding in different ways to the same set of niche variables (i.e., they may be adapted to local conditions). However, think carefully about what you will conclude since many other processes could explain the observed pattern. This is just an exploratory tool.</p>
<p>Go to Niche clustering -&gt; K-means section and select at least 3 niche variables to make the cluster analysis. In my case, as I selected the bios of the <a href="http://www.worldclim.org/">WorldClim</a> database as my niche layers, I used 19 niche variables, but if you want to work with fewer variables just delete some of them (<strong>Select at least 3 niche variables</strong> section).</p>
<div class="figure">
<img src="figures/29_tutorial.png" alt="Niche clustering" width="420"><p class="caption">
Niche clustering
</p>
</div>
<p>Here it is necessary to indicate the number of clusters, the default value is 3 (in the future the app will have algorithms to help you to make this decision). Press the <strong>Go!!!</strong> button and you will see a 3-dimensional plot with ellipsoids representing the number of clusters you suggested. Bellow this plot you will see a <code>leaflet</code> map with the geographic projection of the points that fall inside each ellipsoid (colors help to identify to which cluster each data point belongs). his tool is designed to help you visualizing the <code>Hutchison’s duality</code> <span class="citation">(Colwell and Rangel 2009)</span>.</p>
<div class="figure">
<img src="figures/ntbox_05_ncluster.png" alt="Niche clustering and visualization of the `Hutchison’s duality`" width="420"><p class="caption">
Niche clustering and visualization of the <code>Hutchison’s duality</code>
</p>
</div>
<p>Let’s play with the number of clusters (now 5) and see how the results change…</p>
<div class="figure">
<img src="figures/ntbox_05_ncluster_2.png" alt="Niche clustering and visualization of the `Hutchison’s duality`" width="420"><p class="caption">
Niche clustering and visualization of the <code>Hutchison’s duality</code>
</p>
</div>
</div>
<div id="enm-ecological-niche-modeling" class="section level1">
<h1 class="hasAnchor">
<a href="#enm-ecological-niche-modeling" class="anchor"></a>6. <code>ENM</code> (Ecological niche modeling)</h1>
<p>Ecological niche modeling (ENM), is a growing field in ecology and biogeography which aims to reconstruct the multidimensional ecological niche of species, from which to approximate its geographic distribution. ENM uses a set of mathematical and statistical tools to study the relationship between some environmental variables and species occurrences to estimate species niches and predict potential areas where the species can survive. These models have proved useful in ecology and conservation biology because they have been used to identify geographic localities that can be used to relocate endangered species, to study the impacts of climate change in biodiversity, to find biodiversity hotspots, vulnerability to invasive species and pathogens, among other applications <span class="citation">(Peterson T. and Vieglais 2001; Peterson et al. 2011)</span>.</p>
<p>In <code>Nichetoolbox</code> you can model ecological niches by using one of the following modeling algorithms:</p>
<ol style="list-style-type: decimal">
<li>Minimum volume ellipsoid <span class="citation">(Van Aelst and Rousseeuw 2009)</span>
</li>
<li>Bioclim <span class="citation">(Booth et al. 2014)</span>
</li>
</ol>
<p>Although the maxent <span class="citation">(Phillips, Dudik, and Schapire 2004; Phillips and Dudík 2008)</span> is not yet in the GUI interface, <code>ntbox</code> it could be run by using <code><a href="../reference/maxent_call.html">ntbox::maxent_call</a></code>function on the command line.</p>
<div class="figure">
<img src="figures/ntbox_06_nicheM.png" alt="Ecological niche models" width="220"><p class="caption">
Ecological niche models
</p>
</div>
<div id="minimum-volume-ellipsoid-model" class="section level2">
<h2 class="hasAnchor">
<a href="#minimum-volume-ellipsoid-model" class="anchor"></a>Minimum volume ellipsoid model</h2>
<p>Ellipsoid models use the multinormal probability density function (PDF; equation 1) to compute the niche suitability index; the PDF is rescaled to have a suitability index defined in the interval <span class="math inline">\([0,1]\)</span>.</p>
<p><span class="math display">\[f\,(x_{1},x_{2},x_{3},..,x_{k})=\frac{1}{\left(2\pi\right)^{k}\mid\mathbf{\sum}\mid}\exp\left(-\frac{1}{2}\left(\mathbf{x-\mathbf{\mathbf{\mu}}}\right)^{\mathbf{T}}\mathbf{\sum}^{-1}\left(\mathbf{x-\mathbf{\mathbf{\mu}}}\right)\right)\,\,(1)\]</span></p>
<p><span class="math display">\[f\,(x_{1},x_{2},x_{3},..,x_{k})=1\,\exp\left(-\frac{1}{2}\left(\mathbf{x-\mathbf{\mathbf{\mu}}}\right)^{\mathbf{T}}\mathbf{\sum}^{-1}\left(\mathbf{x-\mathbf{\mathbf{\mu}}}\right)\right)\]</span></p>
<p>where <span class="math inline">\(\mathbf{x}\)</span> is the vector of environmental variables such that each <span class="math inline">\(x_i\)</span> represents an observation of the environmental variable <span class="math inline">\(i\)</span>. <span class="math inline">\(\Sigma\)</span> is the covariance matrix of the occ data. <span class="math inline">\(\mu\)</span> is the vector of means (centroids).</p>
<p>The <span class="math inline">\(({\mathbf x}-{\boldsymbol\mu})^\mathrm{T}{\boldsymbol\Sigma}^{-1}({\mathbf x}-{\boldsymbol\mu})\)</span> is the square of the Mahalanobis distance.</p>
<p>In <code>Nichetoolbox</code>, to make an ellipsoid model you just need the environmental information of your occurrence points and select which layers will define the axes of the niche model.</p>
<p>The model can be trained either with all occurrence data or with the occurrence points that lie inside your M polygon.</p>
<div class="figure">
<img src="figures/37_tutorial.png" alt="ENM M-polygon" width="220"><p class="caption">
ENM M-polygon
</p>
</div>
<p>Similarly, you can project the model to the geography by using either the full extent of rasters or the extent of the M polygon.</p>
<div id="using-full-extent" class="section level4">
<h4 class="hasAnchor">
<a href="#using-full-extent" class="anchor"></a>Using full extent</h4>
<div class="figure">
<img src="figures/38_tutorial.png" alt="ENM all extent" width="220"><p class="caption">
ENM all extent
</p>
</div>
<p>Select the niche variables and run your model.</p>
<div class="figure">
<img src="figures/ntbox_06_Ellips.png" alt=" " width="420"><p class="caption">
</p>
</div>
</div>
<div id="using-the-extent-of-the-m-polygon" class="section level4">
<h4 class="hasAnchor">
<a href="#using-the-extent-of-the-m-polygon" class="anchor"></a>Using the extent of the M polygon</h4>
<div class="figure">
<img src="figures/40_tutorial.png" alt=" " width="420"><p class="caption">
</p>
</div>
<p>Download ellipsoid meta-data.</p>
<div class="figure">
<img src="figures/41_tutorial.png" alt="Ellipsoid meta-data" width="220"><p class="caption">
Ellipsoid meta-data
</p>
</div>
<p>Download the ellipsoid raster model.</p>
<div class="figure">
<img src="figures/42_tutorial.png" alt="Ellipsoid raster model" width="420"><p class="caption">
Ellipsoid raster model
</p>
</div>
<p>Download distance to the centroid table.</p>
<div class="figure">
<img src="figures/43_tutorial.png" alt="Distances to niche-centroid table" width="420"><p class="caption">
Distances to niche-centroid table
</p>
</div>
</div>
</div>
<div id="bioclim-model" class="section level2">
<h2 class="hasAnchor">
<a href="#bioclim-model" class="anchor"></a>Bioclim model</h2>
<p>The way that Bioclim model is implemented in <code>Nichetoolbox</code> is the same as the ellipsoid model:</p>
<ul>
<li>The model can be trained either with all occurrence data or with occurrence points that lie inside your M polygon.</li>
</ul>
<div class="figure">
<img src="figures/ntbox_06_bioclim.png" alt=" " width="420"><p class="caption">
</p>
</div>
<ul>
<li>Similarly, you can project the model to the geography using either the full extent of rasters or the extent of the M polygon.</li>
</ul>
<div class="figure">
<img src="figures/45_tutorial.png" alt=" " width="420"><p class="caption">
</p>
</div>
</div>
<div id="enm-projection-in-geographic-space" class="section level2">
<h2 class="hasAnchor">
<a href="#enm-projection-in-geographic-space" class="anchor"></a>ENM projection in geographic space</h2>
<p>Once you have modeled your species’ niche using one or all modeling algorithms, you can explore them in geographic space by using the model visualizer. The visualizer is interactive (you can zoom in/out a map) and uses the <code>leaflet</code> library.</p>
<div class="figure">
<img src="figures/ntbox_06_Gproj.png" alt=" " width="420"><p class="caption">
</p>
</div>
</div>
</div>
<div id="sdm-performance" class="section level1">
<h1 class="hasAnchor">
<a href="#sdm-performance" class="anchor"></a>7. <code>SDM performance</code>
</h1>
<p>The last part of the project deals with species distribution model evaluation and performance. <code>Nichetoolbox</code> has two ways to evaluate models:</p>
<ol style="list-style-type: decimal">
<li><p>Partial Roc: This is a threshold independent technique proposed by <span class="citation">(Peterson, Papes, and Soberon 2008)</span> and it is also implemented on the <code>kuenm</code> package <span class="citation">(Cobos et al. 2019)</span>.</p></li>
<li><p>Confusion matrix metrics: You can compute prevalence, specificity, sensitivity, TSS, Kappa, correct classification rate, misclassification rate, negative predictive power, positive predictive power, omission error fraction, commission error fraction, false negative rate, and false positive rate from the confusion metrics <span class="citation">(Fielding and Bell 1997)</span>.</p></li>
</ol>
<div id="partial-roc" class="section level3">
<h3 class="hasAnchor">
<a href="#partial-roc" class="anchor"></a>Partial ROC</h3>
<p>To do Partial ROC analysis in <code>Nichetoolbox</code> upload your continuous niche model output map (e.g., from Maxent) and your validation dataset.</p>
<div class="figure">
<img src="figures/56_tutorial.png" alt=" " width="420"><p class="caption">
</p>
</div>
<p>Validation data must be in the following format:</p>
<table class="table">
<thead><tr class="header">
<th align="left">sp_name</th>
<th align="right">longitude</th>
<th align="right">latitude</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Ambystoma tigrinum</td>
<td align="right">-107.08333</td>
<td align="right">51.08333</td>
</tr>
<tr class="even">
<td align="left">Ambystoma tigrinum</td>
<td align="right">-102.41667</td>
<td align="right">44.41667</td>
</tr>
<tr class="odd">
<td align="left">Ambystoma tigrinum</td>
<td align="right">-99.75000</td>
<td align="right">45.91667</td>
</tr>
<tr class="even">
<td align="left">Ambystoma tigrinum</td>
<td align="right">-85.75000</td>
<td align="right">45.25000</td>
</tr>
<tr class="odd">
<td align="left">Ambystoma tigrinum</td>
<td align="right">-91.75000</td>
<td align="right">45.75000</td>
</tr>
<tr class="even">
<td align="left">Ambystoma tigrinum</td>
<td align="right">-91.41667</td>
<td align="right">39.75000</td>
</tr>
</tbody>
</table>
<div id="partial-roc-output" class="section level5">
<h5 class="hasAnchor">
<a href="#partial-roc-output" class="anchor"></a>Partial ROC output</h5>
<div class="figure">
<img src="figures/ntbox_07_proc.png" alt=" " width="420"><p class="caption">
</p>
</div>
<div class="figure">
<img src="figures/ntbox_07_proc2.png" alt=" " width="420"><p class="caption">
</p>
</div>
</div>
</div>
<div id="binary-maps" class="section level3">
<h3 class="hasAnchor">
<a href="#binary-maps" class="anchor"></a>Binary maps</h3>
<p>The ‘Binary maps’ section has functions to transform continuous models into binary maps (i.e., presence and absence of suitable conditions).</p>
<p>The conversion can be done by using one of the following methods:</p>
<ul>
<li>
<strong>Minimum training presence:</strong> Uses the lowest suitability value where a presence occurs as a cut-off threshold.</li>
<li>
<strong>Confusion matrix optimization:</strong> By using true presences and absences the algorithm searches for the cut-off threshold that optimizes the value of Kappa and/or TSS statistic.</li>
<li>
<strong>User threshold selection:</strong> Uses the lowest suitability value where a presence occurs as a cut-off threshold.</li>
<li>
<strong>Percent selection:</strong> The user can choose the percentile to make the cut-off. The 10 percentile is the default.</li>
</ul>
<div class="figure">
<img src="figures/ntbox_07_binmethods.png" alt=" " width="220"><p class="caption">
</p>
</div>
<div id="minimum-training-presence" class="section level4">
<h4 class="hasAnchor">
<a href="#minimum-training-presence" class="anchor"></a>Minimum training presence</h4>
<p>Just upload your continuous model (.asc) and your training data file (.csv).</p>
<p>Validation data must be in the following format:</p>
<table class="table">
<thead><tr class="header">
<th></th>
<th align="left">sp_name</th>
<th align="right">longitude</th>
<th align="right">latitude</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>85</td>
<td align="left">Ambystoma tigrinum</td>
<td align="right">-100.58333</td>
<td align="right">31.91667</td>
</tr>
<tr class="even">
<td>86</td>
<td align="left">Ambystoma tigrinum</td>
<td align="right">-91.08333</td>
<td align="right">38.91667</td>
</tr>
<tr class="odd">
<td>87</td>
<td align="left">Ambystoma tigrinum</td>
<td align="right">-113.41667</td>
<td align="right">42.75000</td>
</tr>
<tr class="even">
<td>88</td>
<td align="left">Ambystoma tigrinum</td>
<td align="right">-121.41667</td>
<td align="right">39.75000</td>
</tr>
<tr class="odd">
<td>89</td>
<td align="left">Ambystoma tigrinum</td>
<td align="right">-114.58333</td>
<td align="right">42.91667</td>
</tr>
<tr class="even">
<td>90</td>
<td align="left">Ambystoma tigrinum</td>
<td align="right">-94.41667</td>
<td align="right">45.41667</td>
</tr>
</tbody>
</table>
<div class="figure">
<img src="figures/ntbox_07_bin.png" alt=" " width="420"><p class="caption">
</p>
</div>
</div>
<div id="confusion-matrix-optimization" class="section level4">
<h4 class="hasAnchor">
<a href="#confusion-matrix-optimization" class="anchor"></a>Confusion matrix optimization</h4>
<p>The user uploads both the continuous map (.asc) and the presences/absences data file (.csv). The presences/absences data have to be in the following format:</p>
<table class="table">
<thead><tr class="header">
<th align="right">longitude</th>
<th align="right">latitude</th>
<th align="right">presence_absence</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">-111.25000</td>
<td align="right">36.91667</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="right">-106.20000</td>
<td align="right">35.30000</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="right">-98.08000</td>
<td align="right">47.74000</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">-93.27306</td>
<td align="right">45.21076</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="right">-112.64406</td>
<td align="right">36.58329</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">-101.85097</td>
<td align="right">35.18559</td>
<td align="right">1</td>
</tr>
</tbody>
</table>
<p>Once uploaded, press specify the range of thresholds to look for and press the <code>Search threshold</code> button.</p>
<div class="figure">
<img src="figures/59_tutorial.png" alt=" " width="220"><p class="caption">
</p>
</div>
<p>The output looks like this:</p>
<div class="figure">
<img src="figures/ntbox_07_confmat.png" alt=" " width="420"><p class="caption">
</p>
</div>
<div class="figure">
<img src="figures/ntbox_07_confmat_bin.png" alt=" " width="420"><p class="caption">
</p>
</div>
<div class="figure">
<img src="figures/ntbox_07_confumat_res.png" alt=" " width="420"><p class="caption">
</p>
</div>
</div>
<div id="user-defined-threshold" class="section level4">
<h4 class="hasAnchor">
<a href="#user-defined-threshold" class="anchor"></a>User defined threshold</h4>
<p>Specify a cut-off threshold.</p>
<div class="figure">
<img src="figures/ntbox_07_userth.png" alt=" " width="220"><p class="caption">
</p>
</div>
<p>The result is:</p>
<div class="figure">
<img src="figures/ntbox_07_userthR.png" alt=" " width="420"><p class="caption">
</p>
</div>
</div>
<div id="user-defined-threshold-1" class="section level4">
<h4 class="hasAnchor">
<a href="#user-defined-threshold-1" class="anchor"></a>User defined threshold</h4>
<p>Upload the continuous map and the presence data; then select the percentile that you want to work with (11 in this example).</p>
<div class="figure">
<img src="figures/ntbox_07_percentil_selec.png" alt=" " width="220"><p class="caption">
</p>
</div>
<p>The output is:</p>
<div class="figure">
<img src="figures/ntbox_07_percentil_res.png" alt=" " width="420"><p class="caption">
</p>
</div>
</div>
</div>
<div id="binomial-test" class="section level2">
<h2 class="hasAnchor">
<a href="#binomial-test" class="anchor"></a>Binomial test</h2>
<p>Compute the significance of a niche model by using the cumulative binomial probability of success of predicting correctly an occurrence given the validation data and the proportional area predicted as present in the niche model.</p>
<p>According to Anderson et al. (2003) <span class="citation">(Anderson, Lew, and Peterson 2003)</span>, this test is “employed to determine whether test points fall into regions of predicted presence more often than expected by chance, given the proportion of map pixels predicted present by the model.”</p>
<p>You can upload your SDM model as a binary map or as a continuous model. If you choose the second, you will need to specify the threshold to convert it into a binary map.</p>
<div class="figure">
<img src="figures/ntbox_07_binomial.png" alt=" " width="220"><p class="caption">
</p>
</div>
<div class="figure">
<img src="figures/ntbox_07_binomialRes.png" alt=" " width="420"><p class="caption">
</p>
</div>
</div>
</div>
<div id="extrapolation-risk-model-uncertainty" class="section level1">
<h1 class="hasAnchor">
<a href="#extrapolation-risk-model-uncertainty" class="anchor"></a>8. <code>Extrapolation risk</code> (model uncertainty)</h1>
<p>In this section you will find the tools to asses the extrapolation risk of the ecological niche models in a geographic context; this analysis becomes more important when doing model projections in time (e.g., climate change projections) or in geography (i.e., model transference from one calibration region to another region of interest).</p>
<p>The following analyses are available on <code>ntbox</code>:</p>
<ul>
<li>Mobility-Oriented Parity (MOP) <span class="citation">(Owens et al. 2013)</span>
</li>
<li>Multivariate Environmental Similarity Surfaces (MESS) <span class="citation">(Elith, Kearney, and Phillips 2010)</span>
</li>
<li>EXtrapolation DETection tool (ExDet) <span class="citation">(Mesgaran, Cousens, and Webber 2014)</span>
</li>
</ul>
<p>To do any of the analyses listed above use the environmental layers that you uploaded in the <code>AppSettings</code> section.</p>
<div class="figure">
<img src="figures/ntbox_08_extrapol.png" alt=" " width="520"><p class="caption">
</p>
</div>
<div id="mobility-oriented-parity-mop" class="section level2">
<h2 class="hasAnchor">
<a href="#mobility-oriented-parity-mop" class="anchor"></a>Mobility-Oriented Parity (MOP)</h2>
<p>The MOP is calculated following Owens et al. <span class="citation">(Owens et al. 2013)</span>.</p>
<ol style="list-style-type: decimal">
<li>Go to <code>Extrapolation risk</code> section and select MOP</li>
</ol>
<div class="figure">
<img src="figures/ntbox_08_mop0.png" alt="MOP" width="520"><p class="caption">
MOP
</p>
</div>
<ol start="2" style="list-style-type: decimal">
<li>Select the variables that will be used to compute the MOP; these variables should be the same for both the M layers (the calibration layers of your niche model) and the G layers (projection layers).</li>
</ol>
<div class="figure">
<img src="figures/ntbox_08_mop2.png" alt="MOP" width="220"><p class="caption">
MOP
</p>
</div>
<ol start="3" style="list-style-type: decimal">
<li>Select the percent of the reference points (i.e., pixels in M polygon layers) to be sampled (in this example 10%). You can also select the normalized version of MOP (normalized to 1 for regions that are more similar in both M and G regions). The computations can be done in parallel. This method is very efficient for big layers; the <strong>compute each</strong> parameter determines the number of pixels to be processed in each core (number of cores parameter).</li>
</ol>
<div class="figure">
<img src="figures/ntbox_08_mop3.png" alt="MOP" width="220"><p class="caption">
MOP
</p>
</div>
<p>Press Run.</p>
<div class="figure">
<img src="figures/ntbox_08_mop4.png" alt="MOP" width="520"><p class="caption">
MOP
</p>
</div>
</div>
<div id="multivariate-environmental-similarity-surfaces-mess" class="section level2">
<h2 class="hasAnchor">
<a href="#multivariate-environmental-similarity-surfaces-mess" class="anchor"></a>Multivariate Environmental Similarity Surfaces (MESS)</h2>
<p>MESS is computed following <span class="citation">(Elith, Kearney, and Phillips 2010)</span>. A version of this function is implemented in the <code>dismo</code> package <span class="citation">(Hijmans et al. 2011)</span> but the one in the <code>ntbox</code> package runs faster.</p>
<p>As in MOP, you need to select which variables will be used to compute the MESS and then press the <strong>Run</strong> button.</p>
<div class="figure">
<img src="figures/ntbox_08_mess1.png" alt="MESS" width="220"><p class="caption">
MESS
</p>
</div>
<p>The result is:</p>
<div class="figure">
<img src="figures/ntbox_08_mess.png" alt="MESS" width="520"><p class="caption">
MESS
</p>
</div>
</div>
<div id="extrapolation-detection-tool-exdet" class="section level2">
<h2 class="hasAnchor">
<a href="#extrapolation-detection-tool-exdet" class="anchor"></a>Extrapolation Detection tool (ExDet)</h2>
<p>Exdet means “Extrapolation Detection tool” and it is computed following <span class="citation">(Mesgaran, Cousens, and Webber 2014)</span>. In <a href="https://www.climond.org/ExDet.aspx" class="uri">https://www.climond.org/ExDet.aspx</a> the authors mention that</p>
<blockquote>
<blockquote>
<blockquote>
<p>The ExDet tool, based on the Mahalanobis distance measures the similarity between reference and projection domains by accounting for both the deviation from the mean and the correlation between variables. In <code>ntbox</code> you can do the two types of ExDet analysis:</p>
</blockquote>
</blockquote>
</blockquote>
<ol style="list-style-type: decimal">
<li>NT1 (univariate extrapolation)</li>
<li>NT2 (multivariate extrapolation)</li>
</ol>
<div id="nt1" class="section level3">
<h3 class="hasAnchor">
<a href="#nt1" class="anchor"></a>NT1</h3>
<p>Select the <code>Exdet</code> in the left panel of <code>ntbox</code>, then select which variables are going to be used in the analysis for the M and G region.</p>
<div class="figure">
<img src="figures/ntbox_08_exdet1.png" alt="Exdet NT1" width="220"><p class="caption">
Exdet NT1
</p>
</div>
<p>Press run and the result looks like this:</p>
<div class="figure">
<img src="figures/ntbox_08_exdet2.png" alt="Exdet NT1" width="520"><p class="caption">
Exdet NT1
</p>
</div>
</div>
<div id="nt2" class="section level3">
<h3 class="hasAnchor">
<a href="#nt2" class="anchor"></a>NT2</h3>
<p>Follow the above steps and you will see:</p>
<div class="figure">
<img src="figures/ntbox_08_exdet3.png" alt="Exdet NT2" width="520"><p class="caption">
Exdet NT2
</p>
</div>
</div>
</div>
</div>
<div id="gis-tools" class="section level1">
<h1 class="hasAnchor">
<a href="#gis-tools" class="anchor"></a>9. <code>GIS tools</code>
</h1>
<p>Here we provide methods to do some Geographic Information System (GIS) operations. In the <code>GIS tools</code> section you can do the following:</p>
<ul>
<li>
<strong>Export your environmental layers into other formats</strong>: this is very useful as some of the ecological niche modeling software use as input a specific format for the environmental data (<em>e.g.</em> .asc format in <code>maxent</code>).</li>
<li>
<strong>Crop or mask the environmental layers</strong>: Crop or mask the environmental layer given a polygon defined by the user.</li>
<li>
<strong>Principal component transformation</strong>: Make a principal component analysis (PCA) of your environmental layers and make the spatial/temporal projection of them.</li>
</ul>
<p>To do any of the analyses listed above, upload your environmental layers in the <code>AppSettings</code> section and set your working directory.</p>
<div class="figure">
<img src="figures/ntbox_09_export.png" alt=" " width="520"><p class="caption">
</p>
</div>
<div id="export-your-environmental-layers-into-other-formats" class="section level2">
<h2 class="hasAnchor">
<a href="#export-your-environmental-layers-into-other-formats" class="anchor"></a>Export your environmental layers into other formats</h2>
<p>Just select which layers to export into one of the available formats.</p>
<ul>
<li><code>.asc</code></li>
<li><code>.bil</code></li>
<li><code>.tif</code></li>
<li><code>.nc</code></li>
<li><code>.sdat</code></li>
<li><code>.img</code></li>
</ul>
<div class="figure">
<img src="figures/ntbox_09_export2.png" alt=" " width="520"><p class="caption">
</p>
</div>
<p>Give a name to the folder where they will be exported and press go.</p>
<div class="figure">
<img src="figures/ntbox_09_export3.png" alt=" " width="220"><p class="caption">
</p>
</div>
<p>The output is:</p>
<div class="figure">
<img src="figures/ntbox_09_export4.png" alt=" " width="220"><p class="caption">
</p>
</div>
</div>
<div id="crop-or-mask-the-environmental-layers" class="section level2">
<h2 class="hasAnchor">
<a href="#crop-or-mask-the-environmental-layers" class="anchor"></a>Crop or mask the environmental layers</h2>
<p>In the <code>GIS tools</code> section, you can create a polygon of your <code>M (calibration) and G (projection)</code> regions to crop or mask the environmental layers that will be used in the modeling process.</p>
<div class="figure">
<img src="figures/ntbox_09_cropMask1.png" alt=" " width="520"><p class="caption">
</p>
</div>
<p>Select the format to export the crop/masked layers</p>
<div class="figure">
<img src="figures/ntbox_09_cropmask2.png" alt=" " width="420"><p class="caption">
</p>
</div>
<p><code>ntbox</code> will create a folder called <strong>ntbox_nicheLayersMasked</strong></p>
<div class="figure">
<img src="figures/ntbox_09_cropmask2.png" alt=" " width="420"><p class="caption">
</p>
</div>
<p>This is the visualization of the masked layers</p>
<div class="figure">
<img src="figures/ntbox_09_cropmask3.png" alt=" " width="420"><p class="caption">
</p>
</div>
</div>
<div id="principal-component-transformation" class="section level2">
<h2 class="hasAnchor">
<a href="#principal-component-transformation" class="anchor"></a>Principal component transformation</h2>
<p>You can do a principal components analysis (PCA) of your environmental layers and project them in time or space. As in all the analysis of this section, you should upload your environmental layers in the <code>AppSettings</code> section and set your working directory.</p>
<div class="figure">
<img src="figures/ntbox_09_export.png" alt=" " width="520"><p class="caption">
</p>
</div>
<p>The transformation can be computed on the flight (the option <strong>From my niche layers</strong>) or in a previous <code>ntbox</code> session by using the <code>rda</code> file (see the help of the function <code><a href="../reference/spca.html">?ntbox::spca</a></code>).</p>
<div class="figure">
<img src="figures/ntbox_09_pca1.png" alt=" " width="220"><p class="caption">
</p>
</div>
<p>To do the PCA transformation and project it, you must ensure that both the calibration layers and projection layers are listed in the same order (or named equal). This means that if you have a set of calibration layers called <code>bio1</code>, <code>bio2</code>, <code>bio6</code>, and <code>bio12</code>, the projection layers will need to be in the same order <code>cc85bi501</code>, <code>cc85bi502</code>, <code>cc85bi506</code>, <code>cc85bi5012</code>.</p>
<div class="figure">
<img src="figures/ntbox_pca_02.png" alt=" " width="220"><p class="caption">
</p>
</div>
<p>Just select a format for your PC layers and give a name to the directory where they will be saved. When the computation is done you will see a scree plot of the explained variance by each component.</p>
<div class="figure">
<img src="figures/ntbox_pcs_03.png" alt=" " width="220"><p class="caption">
</p>
</div>
<p>The above will create 2 folders, <em>pca_referenceLayers</em> for the calibration layers and <em>PC_projection</em> for the calibration.</p>
<div class="figure">
<img src="figures/ntbox_09_pca_r1.png" alt=" " width="420"><p class="caption">
</p>
</div>
<div class="figure">
<img src="figures/ntbox_09_pca_r2.png" alt=" " width="420"><p class="caption">
</p>
</div>
</div>
</div>
<div id="saving-your-analysis" class="section level1">
<h1 class="hasAnchor">
<a href="#saving-your-analysis" class="anchor"></a>10. <code>Saving your analysis</code>
</h1>
<p>Your analysis can be saved just by pressing the <strong>Save state</strong> button <span class="glyphicon glyphicon-hdd"></span> located in the top-left corner of the application.</p>
<div class="figure">
<img src="figures/ntbox_10_workflow_sv.png" alt=" " width="220"><p class="caption">
</p>
</div>
<p>It is worth noting that you can save your analysis at any stage of the workflow. Depending on the analysis performed, you will find a directory with the results of each analysis, for example:</p>
<ul>
<li>
<strong>ntbox_envLayers</strong>: A directory created for the environmental information downloaded directly from <code>ntbox</code> (<a href="https://worldclim.org/">WorldClim</a>, <a href="https://envirem.github.io/">ENVIREM</a>, <a href="https://www.bio-oracle.org/">Bio-Oracle</a>, <a href="http://chelsa-climate.org/">CHELSA</a>).</li>
<li>
<strong>ntbox_OccData</strong>: Occurrence data files (the raw data from GBIF, the user data, the data cleaned using the spatial filter or/and the dynamic map).</li>
<li>
<strong>ntbox_NicheData</strong>: Niche data files (the environmental values of occurrence data, correlation results, <em>k</em>-means clustering results).</li>
<li>
<strong>ntbox_enm_files</strong>: Ecological niche modeling results (geographic projection files in <em>.asc</em> format for ellipsoids and bioclim models).</li>
<li>
<strong>ntbox_model_eval_files</strong>: Model evaluation files (partial ROC results, binomial test results, map binarization results -confusion matrix optimization, minimum training presence, etc-).</li>
<li>
<strong>ntbox_extrapolation_risk_files</strong>: Extrapolation risk assessment files (MOP, MESS and Exdet results in raster format).</li>
<li>
<strong>GIS tools results</strong>: Principal Components raster files, PCs transfers in time or space, cropped and masked layers.</li>
<li>
<strong>ntbox_workflowReport</strong>: These are <code>HTML</code> files with the code that <code>ntbox</code> used to generate the analysis and results inside the graphical user interface (data_report.html, niche_data_report.html, enm_report.html, model_eval_report.htm, and extrapolation_risk_report.html). The figure below shows some of these files.</li>
</ul>
<div class="figure">
<img src="figures/ntbox_10_gdata.png" alt="ntbox_10_gdata.html" width="220"><p class="caption">
ntbox_10_gdata.html
</p>
</div>
<div class="figure">
<img src="figures/ntbox_10_env_data.png" alt="ntbox_10_env_data.html" width="220"><p class="caption">
ntbox_10_env_data.html
</p>
</div>
<div class="figure">
<img src="figures/ntbox_10_enm.png" alt="ntbox_10_enm.html" width="220"><p class="caption">
ntbox_10_enm.html
</p>
</div>
<div class="figure">
<img src="figures/ntbox_10_enm_eval.png" alt="ntbox_10_enm_eval.html" width="220"><p class="caption">
ntbox_10_enm_eval.html
</p>
</div>
</div>
<div id="references" class="section level1 unnumbered">
<h1 class="hasAnchor">
<a href="#references" class="anchor"></a><strong>References</strong>
</h1>
<div id="refs" class="references">
<div id="ref-Anderson2003">
<p>Anderson, R P, D Lew, and A Townsend Peterson. 2003. “Evaluating predictive models of species’ distributions: Criteria for selecting optimal models.” <em>Ecol. Model.</em> 162: 211–32.</p>
</div>
<div id="ref-Barve2011a">
<p>Barve, Narayani, Vijay Barve, Alberto Jiménez-Valverde, Andrés Lira-Noriega, Sean P. Maher, a. Townsend Peterson, Jorge Soberón, and Fabricio Villalobos. 2011. “The crucial role of the accessible area in ecological niche modeling and species distribution modeling.” <em>Ecol. Modell.</em> 222 (11): 1810–9. <a href="https://doi.org/10.1016/j.ecolmodel.2011.02.011">https://doi.org/10.1016/j.ecolmodel.2011.02.011</a>.</p>
</div>
<div id="ref-Booth2014">
<p>Booth, Trevor H., Henry A. Nix, John R. Busby, and Michael F. Hutchinson. 2014. “bioclim: the first species distribution modelling package, its early applications and relevance to most current MaxEnt studies.” Edited by Janet Franklin. <em>Divers. Distrib.</em> 20 (1): 1–9. <a href="https://doi.org/10.1111/ddi.12144">https://doi.org/10.1111/ddi.12144</a>.</p>
</div>
<div id="ref-Busby1991">
<p>Busby, J R, C R Margules, and M P Austin. 1991. “BIOCLIM - A bioclimate analysis and prediction system.” In <em>Nat. Conserv. Cost-Effective Biol. Surv. Data Anal.</em>, edited by C R Margules and M P Austin, 64. Canberra, Australia.</p>
</div>
<div id="ref-Cobos2019">
<p>Cobos, Marlon E., A. Townsend Peterson, Narayani Barve, and Luis Osorio-Olvera. 2019. “Kuenm: An R Package for Detailed Development of Ecological Niche Models Using Maxent.” <em>PeerJ</em> 7 (February): e6281. <a href="https://doi.org/10.7717/peerj.6281">https://doi.org/10.7717/peerj.6281</a>.</p>
</div>
<div id="ref-Colwell2009">
<p>Colwell, Robert K., and Thiago F. Rangel. 2009. “Hutchinson’s duality: The once and future niche.” <em>Proc. Natl. Acad. Sci. USA</em> 106 (2): 19651–8. <a href="https://doi.org/10.1073/pnas.0901650106">https://doi.org/10.1073/pnas.0901650106</a>.</p>
</div>
<div id="ref-Elith2010">
<p>Elith, Jane, Michael Kearney, and Steven Phillips. 2010. “The art of modelling range-shifting species.” <em>Methods Ecol. Evol.</em> 1 (4): 330–42.</p>
</div>
<div id="ref-FIELDING1997">
<p>Fielding, Alan H., and John. Bell. 1997. “A review of methods for the assessment of prediction errors in conservation presence/absence models.” <em>Environ. Conserv.</em> 24 (1): 38–49.</p>
</div>
<div id="ref-Hijmans2011">
<p>Hijmans, R J, S Phillips, J Leathwick, and J Elith. 2011. “Package dismo: Species distribution modeling.” <a href="http://cran.r-project.org/web/packages/dismo/index.html.">http://cran.r-project.org/web/packages/dismo/index.html.</a></p>
</div>
<div id="ref-Jimenez-Valverde2007">
<p>Jiménez-Valverde, Alberto, and Jorge M. Lobo. 2007. “Threshold criteria for conversion of probability of species presence to either-or presence-absence.” <em>Acta Oecologica</em> 31: 361–69. <a href="https://doi.org/10.1016/j.actao.2007.02.001">https://doi.org/10.1016/j.actao.2007.02.001</a>.</p>
</div>
<div id="ref-Mesgaran2014">
<p>Mesgaran, Mohsen B., Roger D. Cousens, and Bruce L. Webber. 2014. “Here be dragons: a tool for quantifying novelty due to covariate range and correlation change when projecting species distribution models.” Edited by Janet Franklin. <em>Divers. Distrib.</em> 20 (10): 1147–59. <a href="https://doi.org/10.1111/ddi.12209">https://doi.org/10.1111/ddi.12209</a>.</p>
</div>
<div id="ref-Norris2014">
<p>Norris, Darren. 2014. “Model thresholds are more important than presence location type: Understanding the distribution of lowland tapir (Tapirus terrestris) in a continuous Atlantic forest of southeast Brazil.” <em>Trop. Conserv. Sci.</em> 7 (3): 529–47. <a href="https://doi.org/10.1177/194008291400700311">https://doi.org/10.1177/194008291400700311</a>.</p>
</div>
<div id="ref-Owens2013">
<p>Owens, Hannah L, Lindsay P Campbell, L Lynnette Dornak, Erin E Saupe, Narayani Barve, Jorge Soberón, Kate Ingenloff, et al. 2013. “Constraints on interpretation of ecological niche models by limited environmental ranges on calibration areas.” <em>Ecol. Modell.</em> 263 (0): 10–18. <a href="https://doi.org/http://dx.doi.org/10.1016/j.ecolmodel.2013.04.011">https://doi.org/http://dx.doi.org/10.1016/j.ecolmodel.2013.04.011</a>.</p>
</div>
<div id="ref-Peterson2008">
<p>Peterson, A. Townsend, Monica Papes, and Jorge Soberon. 2008. “Rethinking receiver operating characteristic analysis applications in ecological niche modeling.” <em>Ecol. Modell.</em> 213 (1): 63–72.</p>
</div>
<div id="ref-Peterson2011b">
<p>Peterson, A. Townsend, Jorge Soberón, Richard G Pearson, Robert P Anderson, E Martínez-Meyer, Miguel Nakamura, and Miguel Bastos Araujo. 2011. <em>Ecological niches and geographic distributions.</em> Princeton University Press. <a href="https://doi.org/10.5860/CHOICE.49-6266">https://doi.org/10.5860/CHOICE.49-6266</a>.</p>
</div>
<div id="ref-PetersonT-2001">
<p>Peterson T., A, and David Vieglais. 2001. “Predicting species invasions using ecological niche modeling.” <em>Bioscience</em> 51: 363–71.</p>
</div>
<div id="ref-Phillips2004">
<p>Phillips, S, M Dudik, and R Schapire. 2004. “A maximum entropy approach to species distribution modeling.” In <em>21st Int. Conf. Mach. Learn.</em> Banff, Canada.</p>
</div>
<div id="ref-Phillips2008">
<p>Phillips, Steven J., and Miroslav Dudík. 2008. “Modeling of species distributions with Maxent: New extensions and a comprehensive evaluation.” <em>Ecography (Cop.).</em> 31 (2): 161–75.</p>
</div>
<div id="ref-VanAelst2009">
<p>Van Aelst, Stefan, and Peter Rousseeuw. 2009. “Minimum volume ellipsoid.” <em>Wiley Interdiscip. Rev. Comput. Stat.</em> 1 (1): 71–82. <a href="https://doi.org/10.1002/wics.19">https://doi.org/10.1002/wics.19</a>.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Luis Osorio-Olvera.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
